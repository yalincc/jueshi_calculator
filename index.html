<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>绝世好武功内功经脉优化器</title>
    <link href="https://cdn.bootcdn.net/ajax/libs/twitter-bootstrap/5.1.3/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container-fluid py-4">
        <div class="row">
            <!-- 功法配置和功法列表区域 -->
            <div class="col-md-12 mb-4">
                <div class="row equal-height">
                    <!-- 功法配置区域 -->
                    <div class="col-md-5 mb-4">
                        <div class="control-panel mb-4">
                            <h4 class="mb-3">🕉️ 功法配置</h4>
                            <div id="single-skill-input">
                                <div class="mb-3">
                                    <label class="form-label">功法名称</label>
                                    <input type="text" id="skill-name-input" class="form-control mb-2" placeholder="功法名称">
                                </div>
                                <div class="mb-3">
                                    <label class="form-label">穴位序列</label>
                                    <input type="text" id="skill-sequence-input" class="form-control" placeholder="穴位序列（使用数字，如：1,2,3,4,5）">
                                    <small class="text-muted">使用数字表示穴位，用逗号分隔</small>
                                </div>
                                <div class="d-flex gap-2 mb-3">
                                    <button id="add-skill-btn" class="btn btn-light flex-grow-1 action-btn">
                                        ➕ 添加功法
                                    </button>
                                    <button class="btn btn-light flex-grow-1 action-btn" type="button" 
                                            data-bs-toggle="collapse" data-bs-target="#importSection">
                                        📥 批量导入
                                    </button>
                                    <button id="calculate-btn" class="btn btn-success flex-grow-1 action-btn">
                                        🧮 优化计算
                                    </button>
                                </div>
                            </div>

                            <div class="mb-4">
                                <div class="collapse mt-2" id="importSection">
                                    <div class="card card-body">
                                        <label for="importData" class="form-label">导入数据</label>
                                        <textarea id="importData" name="importData" class="form-control mb-2" rows="4" 
                                                  placeholder="粘贴数据，格式示例：
吐纳法:[0,1,2]
混元一气功:[1,2,0,1,2]"></textarea>
                                        <button id="import-skills-btn" class="btn btn-success action-btn-sm">
                                            解析并导入
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 隐藏的结果容器，用于JS处理 -->
                        <div id="result-content" class="d-none"></div>
                    </div>

                    <!-- 功法列表区域 -->
                    <div class="col-md-7">
                        <div class="control-panel mb-4">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h4 class="mb-0">📋 功法列表</h4>
                                <div class="d-flex gap-2">
                                    <button id="export-skills-btn" class="btn btn-sm btn-outline-primary" onclick="exportSkills()">导出</button>
                                    <button id="clear-skills-btn" class="btn btn-sm btn-outline-danger">清空</button>
                                </div>
                            </div>
                            <p class="text-muted">勾选需要参与计算的功法：</p>
                            <div id="skills-display" class="skills-list">
                                <div class="alert alert-secondary h-100">尚未添加任何功法</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 经脉路径示意图区域 - 通栏 -->
                <div class="row mt-2">
                    <div class="col-md-12">
                        <div class="control-panel">
                            <div class="d-flex flex-column align-items-center mb-3">
                                <h4 class="mb-2">🌀 经脉路径示意图</h4>
                                <div class="small text-muted acupoint-type-inline">
                                    <span class="acupoint-type-item"><div class="acupoint-type-icon"></div> 1=圆形</span>
                                    <span class="acupoint-type-item"><div class="acupoint-type-icon square"></div> 2=方形</span>
                                    <span class="acupoint-type-item"><div class="acupoint-type-icon triangle"></div> 3=三角形</span>
                                </div>
                            </div>
                            <div id="meridian-display" class="meridian-container">
                                <div class="alert alert-info">运算后将显示最优经脉路径</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.bootcdn.net/ajax/libs/bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
    <script src="logic.js"></script>
</body>
</html>